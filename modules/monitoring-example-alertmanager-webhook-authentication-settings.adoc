// Module included in the following assemblies:
//
// * monitoring/configuring-the-monitoring-stack.adoc

:_content-type: REFERENCE
[id="example-alertmanager-webhook-authentication-settings_{context}"]
= Example Alertmanager webhook authentication settings

These examples show settings that configure Alertmanager in the `openshift-monitoring` namespace to authenticate with a webhook endpoint by using an API token that is configured in a `Secret` object.

The following sample YAML shows a `Secret` object with authentication credentials to be referenced in the Alertmanager config map settings for the Cluster Monitoring Operator (CMO):

[source,yaml]
----
apiVersion: v1
kind: Secret
data: 
  api_token: m8VjfmV2Cg== <1>
metadata: 
  name: alertmanager-credentials <2>
  namespace: openshift-monitoring
----
<1> Replace this value with the API token used to authenticate to your webhook endpoint.
<2> The name of the secret to be referenced in the CMO config map settings. 

The following sample YAML shows CMO config map settings for Alertmanager.
These settings reference the authentication credentials contained in the previous `Secret` object, which is mounted as a volume in the `alertmanager` container for the Alertmanager pods:

[source,yaml]
----
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-monitoring-config
  namespace: openshift-monitoring
data:
  config.yaml: |
    alertmanagerMain:
      enabled: true
      secrets:
      - alertmanager-credentials <1> 
      receivers:
        - name: webhook
        webhook_configs: 
        - url: 'https://webhook.example.com/' <2>
          http_config: 
            authorization: 
              type: apikey
              credentials_file: /etc/alertmanager/secrets/alertmanager-credentials/api_token <3>
----
<1> The name of the configured Kubernetes `Secret` object.
<2> The URL of the webhook endpoint.
<3> The path to the authentication `api_token` value in the `Secret` object, which has been mounted as a volume in the `alertmanager` container for the Alertmanager pods.
